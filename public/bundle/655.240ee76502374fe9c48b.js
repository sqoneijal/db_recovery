"use strict";(self.webpackChunkdb_recovery=self.webpackChunkdb_recovery||[]).push([[655],{4655:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(8152),l=a(7294),c=a(5692),s=a(5147),r=a(982),o=a(9417),u=a(3138),i=a(9797),m=l.lazy((function(){return Promise.all([a.e(736),a.e(51)]).then(a.bind(a,51))}));const d=function(e){var t=e.refreshTable,a=e.setRefreshTable,d=(0,l.useState)(!0),f=(0,n.Z)(d,2),p=f[0],h=f[1],E=(0,l.useState)(!1),b=(0,n.Z)(E,2),g=b[0],v=b[1],k=(0,l.useState)([]),y=(0,n.Z)(k,2),w=y[0],x=y[1],N=(0,l.useState)({}),_=(0,n.Z)(N,2),C=_[0],Z=_[1],D=(0,l.useState)(""),S=(0,n.Z)(D,2),F=S[0],B=S[1];(0,l.useEffect)((function(){p||[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new u.Tooltip(e,{placement:"top",customClass:"tooltip-dark"})}));return function(){}}),[p]);var G=function(){i.get("/getdata",!0).then((function(e){var t=e.data;t.status?x(t.content):i.notification(t.status,t.msg_response)})).catch((function(e){i.notification(!1,i.error_code_http(e.response.status),e.code)})).then((function(){h(!1)}))};(0,l.useEffect)((function(){return t&&G(),function(){return a(!1)}}),[t]),(0,l.useEffect)((function(){return G(),function(){}}),[]);var z={openFormsBackup:g,setOpenFormsBackup:v,detailContent:C,setDetailContent:Z};return l.createElement(l.Fragment,null,l.createElement(l.Suspense,{fallback:i.lazyLoadFile()},l.createElement(m,z)),l.createElement(c.Z,{className:"shadow-sm"},l.createElement(c.Z.Body,null,l.createElement(s.Z,{className:"align-middle table-row-dashed fs-6 gy-5"},l.createElement("thead",null,l.createElement("tr",{className:"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},l.createElement("th",{className:"text-center"},"id"),l.createElement("th",null,"hostname"),l.createElement("th",null,"username"),l.createElement("th",null,"password"),l.createElement("th",null,"database"),l.createElement("th",null,"db driver"),l.createElement("th",{style:{width:"10%"}}))),l.createElement("tbody",{className:"text-gray-600 fw-semibold"},!p&&i.arrLength(w)?w.map((function(e,t){return l.createElement("tr",{key:t},l.createElement("td",{className:"text-center"},e.id),l.createElement("td",null,e.hostname),l.createElement("td",null,e.username),l.createElement("td",null,F===t?l.createElement(l.Fragment,null,e.password,l.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),B("")}},l.createElement(r.G,{icon:o.Aq,className:"mx-2"}))):l.createElement(l.Fragment,null,i.hide_password(e.password.length),l.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),B(t)}},l.createElement(r.G,{icon:o.Mdf,className:"mx-2"})))),l.createElement("td",null,e.database),l.createElement("td",null,e.dbdriver),l.createElement("td",{className:"text-end"},l.createElement("a",{href:"#","data-bs-title":"Backup database","data-bs-toggle":"tooltip",className:"btn btn-active-icon-success btn-active-text-success btn-sm p-0",style:{marginRight:10},onClick:function(t){t.preventDefault(),Z(e),v(!0)}},l.createElement(r.G,{icon:o.zoY})),l.createElement("a",{href:"#","data-bs-title":"Delete database","data-bs-toggle":"tooltip",className:"btn btn-active-icon-danger btn-active-text-danger btn-sm p-0",onClick:function(t){t.preventDefault(),i.confirmDelete({message:"Apakah anda yakin ingin menghapus database [ ".concat(e.hostname,"@").concat(e.database," ]")}).then((function(t){var a=t.data;if(a.status){var n={id:e.id};i.post("/hapus",n,{},!0).then((function(e){e.data.status&&G()})).catch((function(e){i.notification(!1,i.error_code_http(e.response.status),e.code)}))}else i.notification(!1,a.msg_response)}))}},l.createElement(r.G,{icon:o.I7k}))))})):p?i.table_loading(7):i.table_empty(7))))))}}}]);